<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_security_acl">
    <sys_security_acl action="INSERT_OR_UPDATE">
        <active>true</active>
        <admin_overrides>false</admin_overrides>
        <advanced>true</advanced>
        <condition/>
        <description>Allow write for includeintaskingauthority in x_153465_discovert_discover_office_hierarchy, for users with roles (x_153465_discovert.tasker_application_admin, x_153465_discovert.tasker_global_Tasking_Authority_member_admin), and if the ACL script returns true.</description>
        <name>x_153465_discovert_discover_office_hierarchy.includeintaskingauthority</name>
        <operation display_value="write">write</operation>
        <script><![CDATA[/* jshint esnext: true */
var taskerCommonScripts = new TaskerCommonScriptingMethods();
try {
	var processTaskTemplateTableName = "x_153465_discovert_route_tasks";
	var taskTableName = "x_153465_discovert_route_task_instance";
	var taskingAuthorityTableName = "x_153465_discovert_tasking_authority";
	var sysId = current.sys_id;

	var ouTaQuery = [{"organizational_unit": sysId}];
	var taskingRecord = taskerCommonScripts.queryRelatedShort(taskingAuthorityTableName, ouTaQuery, function(record) {
		return record;
	}, true);
	var taskingRecordSysId = taskingRecord.sys_id;
	// active checker callback function
	var hasActive = false;
	var isActive = function(record2) {
		if(record2.getValue("active") == true || record2.getValue("u_active") == true) {
			hasActive = true;
			return true;
		} else return false;
	};
	taskerCommonScripts.queryRelatedShort(processTaskTemplateTableName, [{"tasking_authority":taskingRecordSysId}], isActive, true);
	var taskQuery = [
		{"primary_assignee":sysId}, 
		{"primary_office":sysId},
		{"tasking_authority":current.sys_id}
	];
	taskerCommonScripts.queryRelatedOrShort(taskTableName, null, taskQuery, isActive, true);
	if(hasActive) {
		answer = false;
	} else {
		answer = true;
	}
} catch(e) {
	taskerCommonScripts.checkException("ACL", gs.info, e);
	answer = false;
}]]></script>
        <sys_class_name>sys_security_acl</sys_class_name>
        <sys_created_by>kbaton</sys_created_by>
        <sys_created_on>2019-03-06 22:45:21</sys_created_on>
        <sys_customer_update>false</sys_customer_update>
        <sys_id>93635a11db88bb40c18c59b2ca9619a4</sys_id>
        <sys_mod_count>15</sys_mod_count>
        <sys_name>x_153465_discovert_discover_office_hierarchy.includeintaskingauthority</sys_name>
        <sys_package display_value="Tasker" source="x_153465_discovert">c6b1162d4fc10300303dc3818110c7b1</sys_package>
        <sys_policy/>
        <sys_replace_on_upgrade>false</sys_replace_on_upgrade>
        <sys_scope display_value="Tasker">c6b1162d4fc10300303dc3818110c7b1</sys_scope>
        <sys_update_name>sys_security_acl_93635a11db88bb40c18c59b2ca9619a4</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2019-04-17 14:19:21</sys_updated_on>
        <type display_value="record">record</type>
    </sys_security_acl>
</record_update>
