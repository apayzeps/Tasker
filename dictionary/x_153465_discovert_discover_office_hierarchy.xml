<?xml version="1.0" encoding="UTF-8"?><database>
    <element label="Organizational Hierarchy" max_length="40" name="x_153465_discovert_discover_office_hierarchy" type="collection">
        <element default="true" label="Active" max_length="40" name="active" type="boolean"/>
        <element default="true" label="Is this Office a Tasking Authority?" max_length="40" name="includeintaskingauthority" type="boolean"/>
        <element calculation="(function calculatedFieldValue(current) {&#13;&#10;&#9;if(current.includeintaskingauthority) {&#13;&#10;&#9;&#9;return &quot;Y&quot;;&#13;&#10;&#9;}&#13;&#10;&#9;return &quot;N&quot;;&#13;&#10;})(current);" label="Is TA?" max_length="1" name="is_ta" read_only="true" type="string" virtual="true"/>
        <element choice="3" default="1" hint="Use this to set a sort order other than the OU abbreviation.  Any OUs with the same Sort Order will sub sort by abbreviation." label="Sort Order" mandatory="true" max_length="40" name="level_order" type="integer">
            <choice>
                <element inactive_on_update="false" label="1" sequence="1" value="1"/>
                <element inactive_on_update="false" label="2" sequence="2" value="2"/>
                <element inactive_on_update="false" label="3" sequence="3" value="3"/>
                <element inactive_on_update="false" label="4" sequence="4" value="4"/>
                <element inactive_on_update="false" label="5" sequence="5" value="5"/>
                <element inactive_on_update="false" label="6" sequence="6" value="6"/>
                <element inactive_on_update="false" label="7" sequence="7" value="7"/>
                <element inactive_on_update="false" label="8" sequence="8" value="8"/>
                <element inactive_on_update="false" label="9" sequence="9" value="9"/>
                <element inactive_on_update="false" label="10" sequence="10" value="10"/>
                <element inactive_on_update="false" label="11" sequence="11" value="11"/>
                <element inactive_on_update="false" label="12" sequence="12" value="12"/>
                <element inactive_on_update="false" label="13" sequence="13" value="13"/>
                <element inactive_on_update="false" label="14" sequence="14" value="14"/>
                <element inactive_on_update="false" label="15" sequence="15" value="15"/>
                <element inactive_on_update="false" label="16" sequence="16" value="16"/>
                <element inactive_on_update="false" label="17" sequence="17" value="17"/>
                <element inactive_on_update="false" label="18" sequence="18" value="18"/>
                <element inactive_on_update="false" label="19" sequence="19" value="19"/>
                <element inactive_on_update="false" label="20" sequence="20" value="20"/>
            </choice>
        </element>
        <element calculation="(function calculatedFieldValue(current) {&#13;&#10;&#9;var parentOuId = current.sys_id;&#13;&#10;&#9;var activeTaskCount = new GlideAggregate(&quot;x_153465_discovert_route_task_instance&quot;);&#13;&#10;&#9;activeTaskCount.addQuery(&quot;primary_assignee&quot;, parentOuId);&#13;&#10;&#9;activeTaskCount.addQuery(&quot;active&quot;, true);&#13;&#10;&#9;activeTaskCount.addAggregate(&quot;COUNT&quot;);&#13;&#10;&#9;activeTaskCount.query();&#13;&#10;&#9;if(activeTaskCount.next())&#13;&#10;&#9;&#9;return activeTaskCount.getAggregate(&quot;COUNT&quot;);&#13;&#10;&#9;return 0;&#13;&#10;})(current);" label="Total Active Tasks" max_length="40" name="numberofactivetasksinou" read_only="true" type="integer" virtual="true"/>
        <element calculation="(function calculatedFieldValue(current) {&#13;&#10;&#9;var parentOuId = current.sys_id;&#13;&#10;&#9;var childOuCount = new GlideAggregate(&quot;x_153465_discovert_discover_office_hierarchy&quot;);&#13;&#10;&#9;childOuCount.addQuery(&quot;parent&quot;, parentOuId);&#13;&#10;&#9;childOuCount.addQuery(&quot;active&quot;, true);&#13;&#10;&#9;childOuCount.addAggregate(&quot;COUNT&quot;);&#13;&#10;&#9;childOuCount.query();&#13;&#10;&#9;if(childOuCount.next())&#13;&#10;&#9;&#9;return childOuCount.getAggregate(&quot;COUNT&quot;);&#13;&#10;&#9;return 0;&#13;&#10;})(current);" label="Total Active Sub OUs" max_length="40" name="numberofchildous" read_only="true" type="integer" virtual="true"/>
        <element calculation="(function calculatedFieldValue(current) {&#13;&#10;&#9;var parentOuId = current.sys_id;&#13;&#10;&#9;var ouMemberCount = new GlideAggregate(&quot;x_153465_discovert_discover_office_members&quot;);&#13;&#10;&#9;ouMemberCount.addQuery(&quot;discover_office_hierarchy&quot;, parentOuId);&#13;&#10;&#9;ouMemberCount.addAggregate(&quot;COUNT&quot;);&#13;&#10;&#9;ouMemberCount.query();&#13;&#10;&#9;if(ouMemberCount.next())&#13;&#10;&#9;&#9;return ouMemberCount.getAggregate(&quot;COUNT&quot;);&#13;&#10;&#9;return 0;&#13;&#10;})(current);" label="Total Members" max_length="40" name="numberofmembersinou" read_only="true" type="integer" virtual="true"/>
        <element display="true" label="OU Abbreviation" mandatory="true" max_length="25" name="office_abbreviation" type="string"/>
        <element label="OU Level" mandatory="true" max_length="40" name="office_level" read_only="true" type="integer"/>
        <element label="OU Name" mandatory="true" max_length="255" name="office_name" type="string"/>
        <element calculation="(function calculatedFieldValue(current) {&#13;&#10;&#13;&#10;&#9;// Add your code here&#13;&#10;&#9;return '';  // return the calculated value&#13;&#10;&#13;&#10;})(current);" label="Parent" max_length="32" name="parent" reference="x_153465_discovert_discover_office_hierarchy" reference_cascade_rule="delete" type="reference"/>
        <element label="OU Tasking Authorities" max_length="4000" name="tasking_authorities" read_only="true" reference="sys_user" reference_qual="roles=x_153465_discovert.tasker_user^EQ" reference_qual_condition="roles=x_153465_discovert.tasker_user^EQ" type="glide_list"/>
        <element attributes="slushbucket_ref_no_expand" label="Completion Notification CC Line" max_length="4000" name="u_completion_cc_line" reference="sys_user" type="glide_list"/>
        <element label="Global Tasking Authorities" max_length="4000" name="u_global_authorities" read_only="true" reference="sys_user" type="glide_list"/>
        <index name="index">
            <element name="parent"/>
        </index>
        <index name="index2">
            <element name="office_name"/>
        </index>
    </element>
</database>
